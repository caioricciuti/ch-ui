import { getPagesUnderRoute } from "nextra/context";
import Link from "next/link";
import { PostCard } from "@/components/blog/PostCard";
import { TagList } from "@/components/blog/TagList";
import { formatDate } from "@/utils/dateFormatter";

export default function BlogIndex() {
  const posts = getPagesUnderRoute("/blog/posts").sort(
    (a, b) => new Date(b.frontMatter.date).getTime() - new Date(a.frontMatter.date).getTime()
  );
  console.log(posts);

return (
<div className="max-w-5xl mx-auto px-4">
<h1 className="text-4xl font-bold mb-8">CH-UI Blog</h1>
<div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-16">
{posts.slice(0, 4).map((post) => (
<PostCard key={post.route} post={post} />
))}
</div>
<div className="flex justify-between items-start">
<div className="w-2/3">
<h2 className="text-2xl font-semibold mb-4">All Posts</h2>
<ul className="space-y-4">
{posts.slice(4).map((post) => (
<li key={post.route}>
<Link href={post.route} className="text-lg hover:underline">
{post.frontMatter.title}
</Link>
<p className="text-sm text-gray-500">{formatDate(post.frontMatter.date)}</p>
</li>
))}
</ul>
</div>
<div className="w-1/3">
<h2 className="text-2xl font-semibold mb-4">Popular Tags</h2>
<TagList />
</div>
</div>
</div>
);
}